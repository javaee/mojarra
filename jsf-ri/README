This README documents the Sun Reference implementation (RI) for JSR 127,
JavaServer (tm) Faces.

jsf-api cvs tag for this implementation: JSF_API_PRD_20030224
jsf-api-spec for this implementation: JSF_SPEC_PRD.pdf

Installation Notes
==================

JavaServer (tm) Faces is intended to run in a Servlet 2.3, JSP 1.2 web
container, such as that distributed with Java Web Services Developer
Pack <http://java.sun.com/webservices/webservicespack.html>.  Please
follow the instructions for your container and have it working well in
your environment before continuing with these installation notes.

To use JavaServer (tm) Faces in your own webapp, you need to follow the
online documentation at <http://java.sun.com/j2ee/javaserverfaces/>.
Make sure to include all the jars in the lib directory of this
distribution in your WEB-INF/lib directory in your webapp.  

Major changes/features in this release:
=======================================

* [EventTypes-19] [Listeners-3] [HandlersModifyTree-33]
  [HandlersSelectTree-34] [StandardComponentEvents-38]
  [EventProcessingPhases-39]

  New Event model as in section JSF.3.3

  This is the biggest change since the previous release.  This change is
  too big to cover in detail in the README.  Two important aspects are:
  we now have "ValueChangedEvents" and there is only one tree, not
  separate request and response trees as before.  Please read the
  appropriate spec section.

  Related API classes and interfaces

    javax.faces.event.AbortProcessingException
    javax.faces.event.ActionEvent
    javax.faces.event.CommandEvent
    javax.faces.event.FacesEvent
    javax.faces.event.FormEvent
    javax.faces.event.ActionListener
    javax.faces.event.ApplicationEvent
    javax.faces.event.FacesListener
    javax.faces.event.ValueChangedEvent
    javax.faces.event.ValueChangedListener
    javax.faces.event.PhaseId
    javax.faces.context.FacesContext
    javax.faces.component.UICommand
    javax.faces.component.UIComponent
    javax.faces.component.UIComponentBas
    javax.faces.tree.Tree

  Related RI classes and interfaces

    All of the Lifecycle phase implementation classes and the
    FacesContext implementation are impacted.  In addition, the class 

    com.sun.faces.taglib.jsf_core.ActionListenerTag

    is impacted.

  Removed API classes and interfaces from previous release

    javax.faces.event.RequestEventHandler
    javax.faces.webapp.EventHandlerTag

  Removed RI classes and interfaces from previous release

    com.sun.faces.lifecycle.HandleRequestEventsPhase


* [ComponentNamespace-10] Flat namespace changes.  The compoundId
  property has gone away, in its place we have getClientId().  Component
  identifiers are no longer required in all cases.  When using JSF from
  JSP, component identifiers are only required when interacting with
  JSTL. See Section JSF 3.1.2 in the spec.  We have a tag library
  validator to enforce this rule.

  Every component can be named by a component identifier, which must be
  unique among the components that share a common naming container
  parent in a component tree. 


  The root of the component tree must be a NamingContainer.

  Related API classes and interfaces

    javax.faces.component.NamingContainer

      An interface defining what it means to be a NaminingContainer

    javax.faces.component.NamingContainerSupport

      The implementation of that interface

    javax.faces.component.UINamingContainer

      A UIComponent that implements NamingContainer, used as the root of
      the tree

    javax.faces.render.Renderer

      Account for removal of getComponentId().

  Related RI classes and interfaces

    com.sun.faces.taglib.FacesValidator

      Base class for Faces TLV

    com.sun.faces.taglib.jsf_core.CoreValidator

      Enforces the rule that components must have ids if they are
      intermixed with certain JSTL tags.

    com.sun.faces.component.UIComponent
    com.sun.faces.component.UIComponentBase

      Changes for getClientId().

* [NamedChild-4] Support for component facets.  

  An additional useful facility would be to define particular subordinate
  components that have a specific role with respect to the owning
  component, which is typically independent of the parent-child
  relationship. An example might be a "data grid" control, where the
  children represent the columns to be rendered in the grid. It is
  useful to be able to identify a component that represents the column
  header and/or footer, separate from the usual child collection that
  represents the column data. To meet this requirement, JavaServer Faces
  components offer support for facets, which represent a named
  collection of subordinate (but non-child) components that are related
  to the current component by virtue of a unique facet name that
  represents the role that particular component plays.

  Related API classes and interfaces

    javax.faces.webapp.FacetTag

      Used by the implementation to denote that a component should be
      added as a facet to its parent, rather than as a child.

    javax.faces.webapp.FacesTag

      Contains some Facet specific logic.

    javax.faces.component.UIComponent
    javax.faces.component.UIComponentBase

      Support for facets and children

  Related RI classes and interfaces

    com.sun.faces.renderkit.html_basic.HtmlBasicRenderer

      Contains some Facet specific logic.

* [TraversalOrder-43] Change the way components are processed so they
  honor the new Facet work.  In addition, add new UIComponent traversal
  methods.

  Instead of using the TreeNavigator class to traverse the tree, this is
  now handled by the UIComponent implementations.

    com.sun.faces.lifecycle.ApplyRequestValuesPhase

      Just call processDecodes() on the root of the tree.

    com.sun.faces.lifecycle.ProcessValidationsPhase

      Just call processValidators() on the root of the tree.

    com.sun.faces.lifecycle.UpdateModelValuesPhase

      Just call processUpdates() on the root of the tree.

    javax.faces.component.UIComponent
    javax.faces.component.UIComponentBase

      Implementation of processDecodes(), processValidators(),
      processUpdates().  These methods all call getFacetsAndChildren()
      so that Facets are processed first, then children.

    javax.faces.webapp.FacesTag
    javax.faces.webapp.FacetTag

     Support for facets.

* [VisibleProperty-27] Add support for the "rendered" property, which is
  leveraged during encode/decode.  See section JSF 3.1.12 of the spec.

  Related API classes and interfaces

    javax.faces.component.UIComponent
    javax.faces.component.UIComponentBase

  All of the Renderers must check this property:

    public void encode*() {
      
      [...]

      // suppress rendering if "rendered" property on the component is
      // false.
      if (!component.isRendered()) {
          return;
      }    

      [...]

    }

* [JspDependencies-7] New Tag Library 

  The URI for the html basic tld has changed to be spec compliant.  It
  is now <http://java.sun.com/jsf/html>.  The recommended prefix for
  this tag lib is "h".

  We have broken the non-component tags out into the jsf-core taglib.
  The URI for this taglib is <http://java.sun.com/jsf/core>.  The
  recommended prefix for this tag lib is "f".

* [UsabilityRenames-59] Class javax.faces.component.UIInput replaces
  javax.faces.component.UITextEntry.  UIInput is for anything
  that can take input from the user.  This change impacts the tags as
  well.  For example, input_secret takes the place of textentry_secret.

  selectone_radio takes the place of selectone_radiogroup
  selectone_listbox takes the place of selectone_optionlist
  output_errors takes the place of validation_message

* [UIParameter-20] Class javax.faces.component.UIParameter and
  com.sun.faces.taglib.jsf_core.ParameterTag are used to specify
  parameters to components.  For example, in the case of output_message:

  <h:output_message id="userMsg" 
    value="Welcome {0}.  Thanks for trying the {1} application." >

    <f:parameter id="param1" modelReference="LoginBean.userName"/>

    <f:parameter id="param2" value="Faces Basic"/>
  
  </h:output_message>

* [Converters-29] Add support for type conversion as in section JSF.3.2.
  Converters enable model data to be stored in a model specific type,
  such as java.util.Date even though.  I addition, the complete set of
  rich formatting offered by the java.text package is exposed through
  Converters.

  Related API classes and interfaces

    javax.faces.convert.ConverterException
    javax.faces.convert.Converter
    javax.faces.convert.ConverterFactory
    javax.faces.component.UIComponent
    javax.faces.component.UIComponentBase
    javax.faces.FactoryFinder

  Related RI classes and interfaces

    com.sun.faces.convert.BooleanConverter
    com.sun.faces.convert.DateConverter
    com.sun.faces.convert.DateTimeConverter
    com.sun.faces.convert.TimeConverter
    com.sun.faces.convert.ConverterFactoryImpl
    com.sun.faces.convert.NumberConverter

* [ELDependencies-8]

  On a component, modelReference values can include any of the following
  implicit objects as the first part of the expression, in addition to
  the name of a model bean stored in the request, session, or
  application scopes:

  Read-only implicit objects

	"facesContext"
	"header"
	"headerValues"

  Read-write implicit objects

	"param"
	"paramValues"
	"initParam"
	"cookie"
	"requestScope",
	"sessionScope"
	"applicationScope"

  The leading "${" and trailing "}" characters for modelReference values
  are optional.

* [Standard-Renderkit] Several new Renderers, and accompanying tags,
  have been added.  Please see Section JSF.7.4 for details.

  Related RI classes and interfaces

    com.sun.faces.renderkit.html_basic.DataRenderer
    com.sun.faces.renderkit.html_basic.DateTimeRenderer
    com.sun.faces.renderkit.html_basic.ErrorsRenderer
    com.sun.faces.renderkit.html_basic.GridRenderer
    com.sun.faces.renderkit.html_basic.GroupRenderer
    com.sun.faces.renderkit.html_basic.ImageRenderer
    com.sun.faces.renderkit.html_basic.LabelRenderer
    com.sun.faces.renderkit.html_basic.ListRenderer
    com.sun.faces.renderkit.html_basic.ListboxRenderer
    com.sun.faces.renderkit.html_basic.SelectManyCheckboxListRenderer
    com.sun.faces.renderkit.html_basic.TimeRenderer
    com.sun.faces.renderkit.html_basic.DateRenderer
    com.sun.faces.renderkit.html_basic.HiddenRenderer
    com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer
    com.sun.faces.renderkit.html_basic.MenuRenderer
    com.sun.faces.renderkit.html_basic.NumberRenderer
    com.sun.faces.taglib.html_basic.Graphic_ImageTag
    com.sun.faces.taglib.html_basic.HtmlBasicValidator
    com.sun.faces.taglib.html_basic.InputTag
    com.sun.faces.taglib.html_basic.Input_DateTag
    com.sun.faces.taglib.html_basic.Input_DateTimeTag
    com.sun.faces.taglib.html_basic.Input_HiddenTag
    com.sun.faces.taglib.html_basic.Input_NumberTag
    com.sun.faces.taglib.html_basic.Input_SecretTag
    com.sun.faces.taglib.html_basic.Input_TextAreaTag
    com.sun.faces.taglib.html_basic.Input_TextTag
    com.sun.faces.taglib.html_basic.Input_TimeTag
    com.sun.faces.taglib.html_basic.Output_DateTag
    com.sun.faces.taglib.html_basic.Output_DateTimeTag
    com.sun.faces.taglib.html_basic.Output_ErrorsTag
    com.sun.faces.taglib.html_basic.Output_LabelTag
    com.sun.faces.taglib.html_basic.Output_MessageTag
    com.sun.faces.taglib.html_basic.Output_NumberTag
    com.sun.faces.taglib.html_basic.Output_TimeTag
    com.sun.faces.taglib.html_basic.Panel_DataTag
    com.sun.faces.taglib.html_basic.Panel_GridTag
    com.sun.faces.taglib.html_basic.Panel_GroupTag
    com.sun.faces.taglib.html_basic.Panel_ListTag
    com.sun.faces.taglib.html_basic.SelectMany_CheckboxListTag
    com.sun.faces.taglib.html_basic.SelectMany_ListboxTag
    com.sun.faces.taglib.html_basic.SelectMany_MenuTag
    com.sun.faces.taglib.html_basic.SelectOne_ListboxTag
    com.sun.faces.taglib.html_basic.SelectOne_MenuTag
    com.sun.faces.taglib.html_basic.SelectOne_RadioTag

  The renderer
  com.sun.faces.renderkit.html_basic.TextAndGraphicRenderer has
  been removed.  It is replaced by using separete text and graphic
  renderers.

* [ValidatorsAPI-42] Please see section JSF.2.2.3 for more detail.
  There are now tags for the commonly used validators.

  Related RI classes and interfaces

    com.sun.faces.taglib.jsf_core.ValidateDoubleRangeTag
    com.sun.faces.taglib.jsf_core.ValidateLengthTag
    com.sun.faces.taglib.jsf_core.ValidateLongRangeTag
    com.sun.faces.taglib.jsf_core.ValidateRequiredTag
    com.sun.faces.taglib.jsf_core.ValidateStringRangeTag
    com.sun.faces.taglib.jsf_core.ValueChangedListenerTag

* Deprecated APIs

  These will be REMOVED before the spec becomes final.

  javax.faces.context.FacesContext.addApplicationEvent()
  javax.faces.context.FacesContext.getApplicationEvents()
  javax.faces.context.FacesContext.getApplicationEventsCount()
  javax.faces.context.FacesContext.getApplicationHandler()
  javax.faces.event.CommandEvent
  javax.faces.event.FormEvent
  javax.faces.lifecycle.ApplicationHandler
  javax.faces.lifecycle.Lifecycle.getApplicationHandler()
  javax.faces.lifecycle.Lifecycle.setApplicationHandler()
  javax.faces.lifecycle.Lifecycle.executePhase()
  javax.faces.lifecycle.Phase

Known Issues With This Release
==============================

* Be aware of bug
  <http://nagoya.apache.org/bugzilla/show_bug.cgi?id=12492>.
  JSP with lots of custom tags crashes tomcat VM

* Due to a bug in JSTL 1.0, you must have the jstl.jar and standard.jar in
  your WEB-INF/lib directory of each webapp.  It is not sufficient to
  place these jars in your tomcat/common/lib directory.

* When saving tree in session, we don't support multiple concurrent
  requests to faces app from one client.

*  Component type is hard coded in component subclasses (ex: UICommand)
   as fully qualfied class names (ex: javax.faces.component.UICommand).
   However, a component's type is configurable in the renderkit's xml 
   configuration file (HtmlBasicRenderKit.xml).

*  AttributeDescriptor support happens all the time, even though it's
   only used at design time.

Legal Notice
============

Copyright © 2002 Sun Microsystems, Inc., 4150 Network Circle, Santa
Clara, California 95054, U.S.A. All rights reserved.

Sun Microsystems, Inc. has intellectual property rights relating to
technology embodied in this product. In particular, and without
limitation, these intellectual property rights may include one or more
of the U.S. patents listed at http://www.sun.com/patents and one or more
additional patents or pending patent applications in the U.S. and other
countries.

This product is distributed under licenses restricting its use, copying
distribution, and decompilation. No part of this product may be
reproduced in any form by any means without prior written authorization
of Sun and its licensors, if any.

Third-party software, including font technology, is copyrighted and
licensed from Sun suppliers.

Sun, Sun Microsystems, the Sun logo, the Java Coffee Cup logo,
JavaServer, and Java are trademarks or registered trademarks of Sun
Microsystems, Inc. in the U.S. and other countries.

Federal Acquisitions: Commercial Software - Government Users Subject to
Standard License Terms and Conditions.

-----------------------------------------------------------------------

Copyright © 2002 Sun Microsystems, Inc., 4150 Network Circle,
Santa Clara, California 95054, Etats-Unis. Tous droits réservés.

Sun Microsystems, Inc. a les droits de propriété intellectuels relatants
à la technologie incorporée dans ce produit. En particulier, et sans la
limitation, ces droits de propriété intellectuels peuvent inclure un ou
plus des brevets américains énumérés à http://www.sun.com/patents et un
ou les brevets plus supplémentaires ou les applications de brevet en
attente dans les Etats - Unis et les autres pays.

Ce produit ou document est protégé par un copyright et distribué avec
des licences qui en restreignent l'utilisation, la copie, la
distribution, et la décompilation. Aucune partie de ce produit ou
document ne peut être reproduite sous aucune forme, par quelque moyen
que ce soit, sans l'autorisation préalable et écrite de Sun et de ses
bailleurs de licence, s'il y ena.

Le logiciel détenu par des tiers, et qui comprend la technologie
relative aux polices de caractères, est protégé par un copyright et
licencié par des fournisseurs de Sun.

Sun, Sun Microsystems, le logo Sun, le logo Java Coffee Cup, JavaServer,
et Java sont des marques de fabrique ou des marques déposées de Sun
Microsystems, Inc. aux Etats-Unis et dans d'autres pays.
